<!DOCTYPE html>
<html dir="ltr" lang="zh-CN">

<!-- Mirrored from support.vungle.com/hc/zh-cn/articles/204374244-设置奖励广告 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 23 Sep 2021 09:57:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8" />
  <!-- v20226 -->

  <title>设置奖励广告 &ndash; Vungle CN</title>

  <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="" />

  <meta name="description" content="为何使用奖励视频广告？ 为最大化收入同时保持出色的 UX，Vungle 建议使用奖励视频广告。在应用的自然间隙显示，奖励视频广告可提供高收入，尤其是当您按照我们的建议让这些广告不可跳过时。此广告位置还提供出色的..." /><meta property="og:image" content="https://theme.zdassets.com/theme_assets/534077/4497be3388c9bd3609c33d6eaf9b0c04c5c63a53.svg" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Vungle CN" />
<meta property="og:title" content="设置奖励广告" />
<meta property="og:description" content="为何使用奖励视频广告？
为最大化收入同时保持出色的 UX，Vungle 建议使用奖励视频广告。在应用的自然间隙显示，奖励视频广告可提供高收入，尤其是当您按照我们的建议让这些广告不可跳过时。此广告位置还提供出色的 UX，因为用户选择观看视频，然后被奖励一些有价值的物品，如虚拟货币、优质内容或应用内商品。向看完视频的用户发放的奖励的金额和类型完全由您决定。实现此目的有两种方法：应用内奖励或服务器..." />
<meta property="og:url" content="204374244.html" />
<link rel="canonical" href="204374244-%e8%ae%be%e7%bd%ae%e5%a5%96%e5%8a%b1%e5%b9%bf%e5%91%8a.html" />
<link rel="alternate" hreflang="de" href="../../de/signin801e.html" />
<link rel="alternate" hreflang="en" href="../../en-us/articles/204374244-Can-I-use-server-to-server-S2S-callbacks-for-rewarded-ads-.html" />
<link rel="alternate" hreflang="es" href="../../es-mx/signin166e.html" />
<link rel="alternate" hreflang="fr" href="../../fr-fr/signin5ec2.html" />
<link rel="alternate" hreflang="ja" href="../../ja/signin3496.html" />
<link rel="alternate" hreflang="ko" href="../../ko/signinc7f8.html" />
<link rel="alternate" hreflang="pt" href="../../pt-br/signin2763.html" />
<link rel="alternate" hreflang="ru" href="../../ru/signin7649.html" />
<link rel="alternate" hreflang="zh" href="204374244-%e8%ae%be%e7%bd%ae%e5%a5%96%e5%8a%b1%e5%b9%bf%e5%91%8a.html" />

  <link rel="stylesheet" media="all" href="../../../../static.zdassets.com/hc/assets/application-79172500fb4dbec2484043d570946543.css" id="stylesheet" />
    <!-- Entypo pictograms by Daniel Bruce — www.entypo.com -->
    <link rel="stylesheet" media="all" href="../../../../static.zdassets.com/hc/assets/theming_v1_support-cf937686d5b6669242017892da7bad78.css" />
  <link rel="stylesheet" type="text/css" href="../../../../p27.zdassets.com/hc/theming_assets/534077/60720/stylee82d.css?digest=360570052252">

  <link rel="shortcut icon" type="image/x-icon" href="http://theme.zdassets.com/theme_assets/534077/62c5e8616cdae030ecea7cec15cf47a2b729729b.ico" />

    <script src="../../../../static.zdassets.com/hc/assets/jquery-d5395f0b7ac5027403fc17855c46dbfc.js"></script>
    

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

<script>
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";
  analytics.load("bRqfh635lMl7qBpocue716BjaalyFtJD");
  analytics.page();
  }}();
  analytics.ready(function(){
    Appcues.anonymous();
});
</script>









  <style type="text/css">
    @font-face {
      font-family: "Px Grotesk";
      src: url("http://theme.zdassets.com/theme_assets/534077/51587ff68e0ab2bf990a17d993ec1fa7a5451614.woff2") format("woff2"),
           url("http://theme.zdassets.com/theme_assets/534077/8677458bb131e09b83d5bf2ec1ab6d015c18fd8b.woff") format("woff");
      font-weight: normal;
      font-style: normal;
    }
    @font-face {
      font-family: "Px Grotesk";
      src: url("http://theme.zdassets.com/theme_assets/534077/1e02ff61edce3f256e3f8de8e6bfb11bb085905f.woff2") format("woff2"),
           url("http://theme.zdassets.com/theme_assets/534077/b421ade1cc04519f69e9b4ec0fee3d632f993540.woff") format("woff");
      font-weight: bold;
      font-style: normal;
    }
    @font-face {
      font-family: "Px Grotesk";
      src: url("http://theme.zdassets.com/theme_assets/534077/1056b20fe6b0f2a56568ecdea5119e1577667803.woff2") format("woff2"),
           url("http://theme.zdassets.com/theme_assets/534077/0ea45f63097574b5446148c9670509ae56dc2975.woff") format("woff");
      font-weight: 300;
      font-style: italic;
    }
    @font-face {
      font-family: "Px Grotesk";
      src: url("http://theme.zdassets.com/theme_assets/534077/78bd021a78ca5752e43275a982a96b00bd004a54.woff2") format("woff2"),
           url("http://theme.zdassets.com/theme_assets/534077/115efed0d77bd96754f56a00f399a05af518a5a4.woff") format("woff");
      font-weight: 300;
      font-style: normal;
    }
    @font-family: "Px Grotesk";
      src: url("http://theme.zdassets.com/theme_assets/534077/e5e3d4a71bfb2d624edf48819c3dd1597c4397ff.woff2") format("woff2"),
           url("http://theme.zdassets.com/theme_assets/534077/9f8a21f09879869f644a45d21aea06dde01f2107.woff") format("woff");
      font-weight: normal;
      font-style: italic;
    }
    @font-family: "Px Grotesk";
      src: url("http://theme.zdassets.com/theme_assets/534077/f4f83c57775879216d798dce95c9a83e442da6ab.woff2") format("woff2"),
           url("http://theme.zdassets.com/theme_assets/534077/9e93f03906c0fbfd6eba0ecdfe8d739a6b38852d.woff") format("woff");
      font-weight: bold;
      font-style: italic;
    }
    @font-face {
      font-family: "Px Grotesk Screen";
      src: url("http://theme.zdassets.com/theme_assets/534077/2f8d0cbc16a32df1f8b6c36f45c2b4078181ca43.woff2") format("woff2"),
           url("http://theme.zdassets.com/theme_assets/534077/2ab0f28c68ed406c853fec87f698618cd7ac8bc2.woff") format("woff");
      font-weight: 900;
      font-style: normal;
    }
    @font-face {
      font-family: "Px Grotesk OIL";
      src: url("http://theme.zdassets.com/theme_assets/534077/0ce9c7bb30841f31bac192ef415fd27771c17fc9.woff2") format("woff2"),
           url("http://theme.zdassets.com/theme_assets/534077/422274783804fb9c3e984558285801b01b2fe117.woff") format("woff");
      font-weight: normal;
      font-style: normal;
    }
  </style>


<link rel="stylesheet" href="../../../../use.fontawesome.com/releases/v5.10.1/css/all.css">
<link rel="stylesheet" href="../../../../cdn.jsdelivr.net/gh/highlightjs/cdn-release%409.18.1/build/styles/atelier-lakeside-dark.min.css" />
<link rel="stylesheet" href="../../../../cdn.jsdelivr.net/jquery.magnific-popup/1.0.0/magnific-popup.css" />
<script src="../../../../cdn.jsdelivr.net/jquery.magnific-popup/1.0.0/jquery.magnific-popup.min.js"></script>
<script src="../../../../cdn.jsdelivr.net/gh/highlightjs/cdn-release%409.18.1/build/highlight.min.js"></script>
<script src="../../../../cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js"></script>
<script src="../../../../cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>

<meta property="asseturl" content="//theme.zdassets.com/theme_assets/534077/6ff6e0c84e92580e7cc6e9c77a5cc1e724f36743.gif">


<link rel="stylesheet" href="../../../../theme.zdassets.com/theme_assets/534077/02e3878a33d61900d75eb94d43eb4d26929d6dbf.css">

<script src="../../../../theme.zdassets.com/theme_assets/534077/48ea021f3fedbc024c4443d2e946e0b9b742e384.js"></script>
<script src="../../../../theme.zdassets.com/theme_assets/534077/469d1d10574fa6f68d243916e96f61e7ce459a5a.js"></script>
<script src="../../../../theme.zdassets.com/theme_assets/534077/9893f4b0b18dc4018d50a3716fc581152c21535e.js"></script>
<script src="../../../../theme.zdassets.com/theme_assets/534077/ae559ee60cd2d617e942d530c1ee7ac42a973761.js"></script>
<script src="../../../../theme.zdassets.com/theme_assets/534077/c2b4df57e1dcfcf1b5d2298b16c409c8315a177b.js"></script>
<script src="../../../../theme.zdassets.com/theme_assets/534077/cf5c34722566da1ba5ca5d877dc187d282ca6a3f.js"></script>

<!-- ...Appcues... -->
<script type="text/javascript">
  if (userId) {
    Appcues.identify(userId); 
  } else {
    Appcues.anonymous(); 
  }
</script>

<script src="../../../../static.zdassets.com/conditional_fields_app_hc/latest/helpcenter.js"></script>
<script>var cfaRules = [{ "fieldType": "tagger", "field": 114099498832, "value": "user_interface", "select": [114099504272], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099504752, "value": "amazon", "select": [114099577491], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099504752, "value": "android", "select": [114099577491], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099504752, "value": "ios", "select": [114099505792, 114101637652], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099504752, "value": "ios_android", "select": [114099577491, 114099505792], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099504752, "value": "ios_android_amazon", "select": [114099577491, 114099505792], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099504752, "value": "ios_android_amazon_windows", "select": [114099577491, 114099505792, 114099619751], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099504752, "value": "ios_android_windows", "select": [114099577491, 114099505792, 114099619751], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099504752, "value": "multi_platforms_other_combination", "select": [114099577491, 114099505792, 114099619751], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099504752, "value": "windows", "select": [114099619751], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099505792, "value": "other_ios_sdk", "select": [114099619791], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099556032, "value": "adincube", "select": [114099556512], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099556032, "value": "admob", "select": [114099556512], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099556032, "value": "fyber_hezap", "select": [114099556512], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099556032, "value": "ironsource_supersonic", "select": [114099556512], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099556032, "value": "multiple_mediation", "select": [114099556512], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099556032, "value": "other_mediation", "select": [114099556512, 114099619811], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099556032, "value": "upsight", "select": [114099556512], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099556532, "value": "adobe_air", "select": [114099620151], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099556532, "value": "corona", "select": [114099620151], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099556532, "value": "marmalade", "select": [114099620151], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099556532, "value": "other_plugin", "select": [114099620151, 114099620451], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099556532, "value": "unity", "select": [114099620151], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099577491, "value": "other_android_sdk", "select": [114099555992], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099619751, "value": "other_windows_sdk", "select": [114099556012], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099621511, "value": "geo_other", "select": [114099622811], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "advertiser_dashboard", "select": [114099498652, 114099499132], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "advertiser_other", "select": [114099498652, 114099621211], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "advertiser_reportingapi", "select": [114099498652, 114099621211, 114099621691], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "advertiser_useracquisition", "select": [114099498652, 114099621211], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "applicationuser_notreceivingreward", "select": [114099498672, 114099504752, 114099621511], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "applicationuser_other", "select": [114099498672, 114099504752, 114099621511], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "applicationuser_troublesomead", "select": [114099498672, 114099504752, 114099621511, 114099557612], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "applicationuser_unsubscribeads", "select": [114099498672, 114099504752, 114099621511], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "billing_other", "select": [114099571371], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "billing_payment", "select": [114099571371, 114099500132], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "general_accountstatus", "select": [114099571371], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "general_addtransferusers", "select": [114099571371], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "general_deleteaccount", "select": [114099571371], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "general_other", "select": [114099571371], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "general_pwrecovery", "select": [114099571371, 114099621051], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "general_registration", "select": [114099571371, 114099621051], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "publisher_callbacks", "select": [114099498652, 114099556032, 114099556532, 114099620751, 114099621511, 114099504752], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "publisher_integration_cocoapods", "select": [114099498652, 114099504752, 114099556032, 114099556532, 114099621711], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "publisher_integration_dashboard", "select": [114099498652, 114099498832], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "publisher_integration_gradle", "select": [114099498652, 114099504752, 114099556032, 114099556532, 114099621711], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "publisher_integration_multidex", "select": [114099498652, 114099504752, 114099556032, 114099556532, 114099621731], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "publisher_integration_noads", "select": [114099498652, 114099504752, 114099556032, 114099556532, 114099621511], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "publisher_integration_proguard", "select": [114099498652, 114099504752, 114099556032, 114099556532, 114099557592], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "publisher_integration_testmode", "select": [114099498652, 114099504752, 114099556032, 114099556532], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "publisher_other", "select": [114099498652, 114099504752, 114099556032, 114099556532], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "publisher_reportingapi", "select": [114099498652, 114099504752, 114099556032, 114099556532, 114099621691], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "publisher_troublesomead_button", "select": [114099498652, 114099504752, 114099556032, 114099556532, 114099557612], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "publisher_troublesomead_crashing", "select": [114099498652, 114099504752, 114099556032, 114099556532], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "publisher_troublesomead_endcard", "select": [114099498652, 114099504752, 114099556032, 114099556532, 114099557612], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "publisher_troublesomead_freezing", "select": [114099498652, 114099504752, 114099556032, 114099556532, 114099557612], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "publisher_troublesomead_other", "select": [114099498652, 114099504752, 114099556032, 114099556532, 114099557612], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "publisher_troublesomead_sound", "select": [114099498652, 114099504752, 114099556032, 114099556532, 114099557612], "formId": 114093964011, "requireds": [] }, { "fieldType": "tagger", "field": 114099723732, "value": "publisher_troublesomead_video", "select": [114099498652, 114099504752, 114099556032, 114099556532, 114099557612], "formId": 114093964011, "requireds": [] }];</script>

<style type="text/css">

/* Advertiser */
.categories__icon--200198330 {
  background-color: #ff5a41;
}

.categories__icon--200198330:before,
#sidenav-category-200198330 .sidenav-category__link:before {
  background-image: url("http://theme.zdassets.com/theme_assets/534077/9f2e8cfd41383f7f21c68fd99567eb1b1a7993ac.svg");
}

/* SDK */
.categories__icon--200269670 {
  background-color: #3c2869;
}

.categories__icon--200269670:before,
#sidenav-category-200269670 .sidenav-category__link:before {
  background-image: url("http://theme.zdassets.com/theme_assets/534077/ab38e1e12c6a99fe83f4ea9c02bf87e17510558d.svg");
}

/* Publisher */
.categories__icon--360001994512 {
  background-color: #6e7dff;
}

.categories__icon--360001994512:before,
#sidenav-category-360001994512 .sidenav-category__link:before {
  background-image: url("http://theme.zdassets.com/theme_assets/534077/8a0ee6cf2a1300b8adf5a19112e81db3c070a273.svg");
}

/* FAQs */
.categories__icon--115000802567 {
  background-color: #ffd700;
}

.categories__icon--115000802567:before,
#sidenav-category-115000802567 .sidenav-category__link:before {
  background-image: url("http://theme.zdassets.com/theme_assets/534077/840643095495a2f0380fbe420efb55b7a63277fe.svg");
}

/* Creative */
.categories__icon--360001724259 {
  background-color: #ffd2e1;
}

.categories__icon--360001724259:before,
#sidenav-category-360001724259 .sidenav-category__link:before {
  background-image: url("http://theme.zdassets.com/theme_assets/534077/2bb5eeecadf61018e2bda864d22706f146b5a208.svg");
}

</style>
  <script type="text/javascript" src="../../../../p27.zdassets.com/hc/theming_assets/534077/60720/scripte82d.js?digest=360570052252"></script>
<script async src='../../../cdn-cgi/bm/cv/669835187/api.js'></script></head>
<body class="">
  
  

  <div class="js-alert-box"></div>

<div class="layout" >

  <aside class="sidebar" data-sidebar>
  <div class="sidebar__header">
    <div class="sidebar__container sidebar__container--fixed">
      <div class="sidebar__logo">
        <a title="主页" href="../../zh-cn.html">
          <img src="http://theme.zdassets.com/theme_assets/534077/4497be3388c9bd3609c33d6eaf9b0c04c5c63a53.svg" alt="徽标">
        </a>
      </div>
      <ul class="sidebar__list">
        <li class="sidebar__item">
          <a class="sidebar__link sidebar__link--home" title="主页" href="../../zh-cn.html">Home</a>
        </li>
      </ul>
      <div class="sidebar__top-nav"></div>
      <div class="sidebar__content-block" data-sidebar-content></div>
    </div>
  </div>

  <div class="sidebar__container">
    <div class="sidebar__bottom-nav">
      <div class="sidebar__bottom-nav-item">
        
          <div class="dropdown language-selector" aria-haspopup="true">
            <a class="dropdown-toggle btn btn--default btn--small">
              简体中文
              <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">
              <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
              </svg>
            </a>
            <span class="dropdown-menu" role="menu">
              
                <a href="../../de/signin801e.html?return_to=%2Fhc%2Fde%2Farticles%2F204374244-Belohnte-Anzeigen-einrichten" dir="ltr" rel="nofollow" role="menuitem">
                  Deutsch
                </a>
              
                <a href="../../en-us/articles/204374244-Can-I-use-server-to-server-S2S-callbacks-for-rewarded-ads-.html?return_to=%2Fhc%2Fen-us%2Farticles%2F204374244-Can-I-use-server-to-server-S2S-callbacks-for-rewarded-ads-" dir="ltr" rel="nofollow" role="menuitem">
                  English (US)
                </a>
              
                <a href="../../es-mx/signin166e.html?return_to=%2Fhc%2Fes-mx%2Farticles%2F204374244-Configurar-anuncios-con-recompensa" dir="ltr" rel="nofollow" role="menuitem">
                  Español (México)
                </a>
              
                <a href="../../fr-fr/signin5ec2.html?return_to=%2Fhc%2Ffr-fr%2Farticles%2F204374244-Configuration-des-publicit%25C3%25A9s-r%25C3%25A9compens%25C3%25A9es" dir="ltr" rel="nofollow" role="menuitem">
                  Français (France)
                </a>
              
                <a href="../../ja/signin3496.html?return_to=%2Fhc%2Fja%2Farticles%2F204374244-%25E5%25A0%25B1%25E9%2585%25AC%25E5%25AF%25BE%25E8%25B1%25A1%25E3%2581%25AE%25E5%25BA%2583%25E5%2591%258A%25E3%2581%25AE%25E8%25A8%25AD%25E5%25AE%259A" dir="ltr" rel="nofollow" role="menuitem">
                  日本語
                </a>
              
                <a href="../../ko/signinc7f8.html?return_to=%2Fhc%2Fko%2Farticles%2F204374244-%25EB%25B3%25B4%25EC%2583%2581-%25EA%25B4%2591%25EA%25B3%25A0-%25EC%2584%25A4%25EC%25A0%2595" dir="ltr" rel="nofollow" role="menuitem">
                  한국어
                </a>
              
                <a href="../../pt-br/signin2763.html?return_to=%2Fhc%2Fpt-br%2Farticles%2F204374244-Configura%25C3%25A7%25C3%25A3o-de-an%25C3%25BAncios-premiados" dir="ltr" rel="nofollow" role="menuitem">
                  Português do Brasil
                </a>
              
                <a href="../../ru/signin7649.html?return_to=%2Fhc%2Fru%2Farticles%2F204374244-%25D0%259D%25D0%25B0%25D1%2581%25D1%2582%25D1%2580%25D0%25BE%25D0%25B9%25D0%25BA%25D0%25B0-%25D1%2580%25D0%25B5%25D0%25BA%25D0%25BB%25D0%25B0%25D0%25BC%25D0%25BD%25D1%258B%25D1%2585-%25D0%25BE%25D0%25B1%25D1%258A%25D1%258F%25D0%25B2%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B9-%25D1%2581-%25D0%25B2%25D0%25BE%25D0%25B7%25D0%25BD%25D0%25B0%25D0%25B3%25D1%2580%25D0%25B0%25D0%25B6%25D0%25B4%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5%25D0%25BC" dir="ltr" rel="nofollow" role="menuitem">
                  Русский
                </a>
              
            </span>
          </div>
        
      </div>
      <div class="sidebar__bottom-nav-item">  
        <a href="https://vungle.com/login/" target="_blank" class="">
          Platform
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24"><defs><path id="a" d="M16 16H2V2h7V0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V9h-2v7zM11 0v2h3.59l-9.83 9.83 1.41 1.41L16 3.41V7h2V0h-7z"/></defs><use fill="#AAB2BA" fill-rule="nonzero" transform="translate(3 3)" xlink:href="#a"/></svg>
        </a>
      </div>
    </div>
  </div>
</aside>

<div class="sidebar__overlay"></div>

  <div class="main">

    <div class="main__header">

      <a href="#" class="sidebar-toggle__link" data-toggle-menu role="button">
        <span class="sidebar-toggle__burger"><span></span></span>
        <span class="sidebar-toggle__text sidebar-toggle__text--menu"></span>
        <span class="sidebar-toggle__text sidebar-toggle__text--close"></span>
      </a>

      <div class="main__search">
        <form role="search" class="search" data-search="" data-instant="true" autocomplete="off" action="https://support.vungle.com/hc/zh-cn/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" /><input type="search" name="query" id="query" placeholder="Search..." autocomplete="off" aria-label="Search..." />
<input type="submit" name="commit" value="搜索" /></form>
      </div>
      <div class="main__nav">
        <a href="../../en-us/sections/360004473112.html" class="btn btn--topbar hidden-mobile">
          Early Access SDK
        </a>
        <a href="https://vungle.com/signup/" target="_blank" class="btn btn--topbar">
          Platform
          <svg width="24" height="24" viewBox="0 0 24 24"><defs><path id="b" d="M16 16H2V2h7V0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V9h-2v7zM11 0v2h3.59l-9.83 9.83 1.41 1.41L16 3.41V7h2V0h-7z"/></defs><use fill="#0ccec9" fill-rule="nonzero" transform="translate(3 3)" xlink:href="#b"/></svg>
        </a>
      </div>
    </div>

    <div class="main__container">

  <main role="main">
    <div class="article-page" data-article-page>

  <div class="row">
    <div class="article-column article-column--left">
      <div class="box">
        <div class="article-page__wrap" data-article-wrap>
          <article class="article js-active-article" itemscope itemtype="http://schema.org/Article" data-article="204374244">
            <header class="article-header">
              <ol class="breadcrumbs">
  
    <li title="Vungle CN">
      
        <a href="../../zh-cn.html">Vungle CN</a>
      
    </li>
  
    <li title="开发者平台">
      
        <a href="../categories/360001994512-%e5%bc%80%e5%8f%91%e8%80%85%e5%b9%b3%e5%8f%b0.html">开发者平台</a>
      
    </li>
  
    <li title="开发者常见问题">
      
        <a href="../sections/360006073351-%e5%bc%80%e5%8f%91%e8%80%85%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98.html">开发者常见问题</a>
      
    </li>
  
</ol>

              <h1 class="h2 article-title" itemprop="name">
                
                设置奖励广告
              </h1>

              <div class="article-meta">
                <div class="entry-info">
                  <div class="entry-info__avatar">
                    <div class="avatar avatar--agent">
                      <img class="user-avatar user-avatar--default" src="../../../system/photos/326332607/vincentyao.jpg" alt="Avatar">
                    </div>
                  </div>
                  <div class="entry-info__content">
                    <b class="author">
                      Vincent Yao
                    </b>
                    <div class="meta"><time datetime="2020-08-22T06:27:53Z" title="2020-08-22T06:27:53Z" data-datetime="calendar">2020年08月22日 06:27</time></div>
                  </div>
                </div>
                <a class="article-subscribe" title="打开登录对话框" rel="nofollow" role="button" data-auth-action="signin" aria-selected="false" href="204374244-%e8%ae%be%e7%bd%ae%e5%a5%96%e5%8a%b1%e5%b9%bf%e5%91%8a/subscription.html">关注</a>
              </div>
            </header>

            <div class="article__body markdown" itemprop="articleBody">

              <div class="article-main">
                <h1><a name="WhyInterstitial"></a>为何使用奖励视频广告？</h1>
<p>为最大化收入同时保持出色的 UX，Vungle <a href="http://www.vungle.com/best-practices-video-ad-placements/" target="_blank" rel="noopener noreferrer">建议</a>使用奖励视频广告。在应用的自然间隙显示，奖励视频广告可提供高收入，尤其是当您按照我们的建议让这些广告不可跳过时。此广告位置还提供出色的 UX，因为用户选择观看视频，然后被奖励一些有价值的物品，如虚拟货币、优质内容或应用内商品。向看完视频的用户发放的奖励的金额和类型完全由您决定。实现此目的有两种方法：应用内奖励或服务器到服务器回调。</p>
<h1><a name="InAppRewards"></a>建议选项：应用内奖励</h1>
<h2><a name="InAppOverview"></a>概览</h2>
<p>这是使用服务器到服务器回调的备选方法。当用户成功看完广告或点击下载按钮时，您可以在您的应用内直接奖励他们。这种方法的主要优点是实现起来非常简单。如果您更看重速度且不担心回播攻击，这是一个好方法。</p>
<p>Vungle 现在通过动态模板广告提供各种广告格式。与传统广告格式不同，此格式包含视频播放后跟一个结束卡，我们提供的模板在视频播放时会显示行动号召 (CTA) 按钮。看完视频广告的用户以及点击此按钮的用户应获得奖励。</p>
<p><strong>注意：</strong><em>奖励</em>广告有些情况下是指<em>激励</em>广告；这两个术语始终指的是同一类广告。在 SDK 代码和我们的报告 API 中，我们使用术语“激励”。</p>
<h2><a name="InAppImplementationIOS"></a>iOS 的实现</h2>
<p>实现 VungleSDK Delegate，我们在 <a href="360002925791-%e5%bc%80%e5%a7%8b%e9%9b%86%e6%88%90.html" target="_self">Vungle iOS v6.4.5</a>&nbsp;中进行了讨论。</p>
<pre><code>- (void)vungleWillCloseAdWithViewInfo:(VungleViewInfo *)info placementID:(NSString *)placementID;</code></pre>
<p>如果回调 <code>vungleSDKwillCloseAdWithViewInfo</code> 传递给您一个 <code>viewInfo</code> 字典，其密钥 <code>completedView</code> 或 <code>didDownload</code> 的值为‘yes’，说明用户已获得了奖励。</p>
<h2><a name="InAppImplementationAndroid"></a>Android 的实现</h2>
<p>实现 EventListener 接口，我们在 <a href="360033384691.html" target="_self">Vungle Android v6.4.11</a>中进行了讨论。</p>
<pre><code>public void onAdEnd (String placementReferenceId, boolean wasSuccessfulView, boolean wasCallToActionClicked)</code></pre>
<p>如果回调 <code>onAdEnd</code> 为 <code>wasSuccessfulView</code> 或 <code>wasCallToActionClicked</code> 返回了‘true’，说明用户已获得了奖励。</p>
<h1><a name="ServerToServerCallbacks"></a>服务器到服务器回调</h1>
<h2><a name="ServerToServerOverview"></a>概览</h2>
<p>服务器到服务器回调让您可以使用游戏内货币或其他奖励奖励观看广告的用户。当用户成功看完广告时，您可以配置从 Vungle 服务器到您自己的服务器的回调，以通知您用户完成了操作。's servers to your own to notify you of the user'</p>
<p>此方法的一个优点是控制。此方法允许您直接在服务器端进行更改和更新，因此无需推送更新。另一个优点是安全，可阻止<a href="http://en.wikipedia.org/wiki/Replay_attack">重播攻击</a>（当有效数据传输出现恶意的或欺骗性的重复或延迟时）。</p>
<h2><a name="ServerToServerImplementation"></a>实现</h2>
<p><a name="ServerToServerImplementationV5"></a><strong>Vungle SDK v. 5.x 注意事项：</strong>从 SDK v. 5.1 开始，我们将奖励选项移到了仪表板，这样发布人可以轻松更改此选项，而无需更改代码。在您的Dashboard中，设置奖励为奖励广告位即可。</p>
<p><a name="ServerToServerImplementationV4"></a><strong>Vungle SDK v.1.0 - v.4.1 注意事项：</strong></p>
<ul>
<li><strong>对于 iOS</strong>，首先将您的 <code>playAd</code> 对象中的 <code>vunglePlayAdOptionKeyIncentivized</code> 选项设置为‘yes’。</li>
<li><strong>对于 Android</strong>，首先将您的 <code>AdConfig</code> 对象中的setIncentivizedFields选项设置为‘true’。</li>
</ul>
<h3>所有 Vungle SDK 版本的实现</h3>
<p>当用户观看了 80% 或更多奖励广告内容时，即被视为完成了观看。Vungle 随后将使用callback URL 对您的服务器执行 ping 操作，此 URL 如下所示：</p>
<pre><code>http://acme.com/bugzBunny/reward?uid=%user%</code></pre>
<p>或像这样：</p>
<pre><code>http://acme.com/bugzBunny/reward? amount=1&amp;uid=%user%&amp;txid=%txid%&amp;digest=%digest%</code></pre>
<p>我们建议使用<code>etxid</code> 和<code>edigest</code>，像这样：</p>
<p><code>http://acme.com/bugzBunny/reward? amount=1&amp;uid=%user%&amp;etxid=%etxid%&amp;edigest=%edigest%</code>.</p>
<p>请在仪表板上应用的<strong>设置</strong>中配置回调 URL（如下所示）。</p>
<p><img src="../../article_attachments/360046157191/20191225164338dama.png" alt="20191225164338dama.png" /></p>
<p>大部分发布人只使用 <code>%user%</code>、<code>plus</code><code>%txid%</code> 和 <code>%digest%</code> 来实现安全目的，但下面这些全部可以使用：</p>
<table style="width: 749px;">
<thead>
<tr>
<td style="width: 132.5px;">
<p><strong>变量</strong></p>
</td>
<td style="width: 611.5px;">
<p><strong>说明</strong></p>
</td>
</tr>
</thead>
<tbody>
<tr>
<td style="width: 132.5px;">
<p><code>%user%</code></p>
</td>
<td style="width: 611.5px;">
<p>用户名通过以下方式提供给 Vungle SDK：</p>
<p>●&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>iOS</strong>：&nbsp;<code>VunglePlayAdOptionKeyUser</code> 密钥传递到 playAd()</p>
<p>●&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Android</strong>：使用Vungle.setIncentivizedFields设值函数传递到 <code>playAd()</code></p>
</td>
</tr>
<tr>
<td style="width: 132.5px;">
<p><code>%udid%</code></p>
</td>
<td style="width: 611.5px;">
<p>设备唯一识别码</p>
</td>
</tr>
<tr>
<td style="width: 132.5px;">
<p><code>%ifa%</code></p>
</td>
<td style="width: 611.5px;">
<p>●&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>iOS</strong>：Apple 的设备唯一识别码。</p>
<p>●&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Android</strong>：将返回 Google 广告客户 ID</p>
</td>
</tr>
<tr>
<td style="width: 132.5px;">
<p><code>%etxid%</code></p>
</td>
<td style="width: 611.5px;">
<p>带服务器时戳的完成观看的唯一交易 ID；transactionID:timestamp（推荐）。</p>
</td>
</tr>
<tr>
<td style="width: 132.5px;">
<p><code>%edigest%</code></p>
</td>
<td style="width: 611.5px;">
<p>验证回调来自 Vungle 的安全令牌；请参阅<a href="#ServerToServerSecurity">安全</a>部分了解详细信息（推荐）。</p>
</td>
</tr>
<tr>
<td style="width: 132.5px;">
<p><code>%txid%</code></p>
</td>
<td style="width: 611.5px;">
<p>完成观看的唯一交易 ID</p>
</td>
</tr>
<tr>
<td style="width: 132.5px;">
<p><code>%digest%</code></p>
</td>
<td style="width: 611.5px;">
<p>验证回调来自 Vungle 的安全令牌；请参阅<strong>安全</strong>部分了解详细信息</p>
</td>
</tr>
</tbody>
</table>
<p><span class="wysiwyg-color-red"><strong>请注意，<code>%user%</code> 是您需要传入的唯一变量。其余变量将来自 Vungle 服务器（如果您将它们放入回调 URL 中）。</strong></span></p>
<h3><a name="ServerToServerRewardConfig"></a>奖励配置</h3>
<p>您已经可以奖励观看广告的用户了，那么您用什么来作为奖品呢？如果您每次都奖励宝石，那再简单不过了。但是，如果您希望来点更高级的奖品该怎么办？我们没有为奖励配置提供内置选项，不过我们在这里给出了一些建议：</p>
<p>假设您的应用程序在多个位置放置了奖励广告：既在商店内，又在每三次“游戏结束”时。您希望在商店内奖励玩家硬币，在游戏结束时奖励生命。对于<code>playAd()</code>的每个实例，请像这样配置用户：</p>
<pre><code>userName123:coins or userName123:lives&nbsp;</code></pre>
<p>然后，当您的服务器收到 Vungle 的回调时，会将 <code>%user%</code> 解析为正确的奖励！</p>
<h2><a name="ServerToServerSecurity"></a>安全</h2>
<h3><a name="ServerToServerAuthenticatingCallbacks"></a>验证回调</h3>
<p>为了验证您收到的回调来自 Vungle，请为您的应用程序选择“安全回调密钥”复选框。这会生成一个像下面这样的密钥：</p>
<pre><code>4YjaiIualvm8/4wkMBRH8pctlqB1NyzhK3qUGUar+Zc=</code></pre>
<p><img src="../../article_attachments/360046126511/mceclip2.png" alt="mceclip2.png" /></p>
<p>您可以按照如下方法使用此密钥来验证回调的来源：</p>
<ol>
<li>通过将密钥与交易 ID 连接来创建原始交易验证字符串，使用冒号分隔，像这样：<br />
<pre><code>transactionString = secretKey + <span class="wysiwyg-color-red">":"</span> + %txid% <em>or</em> %etxid%</code></pre>
</li>
<li>使用 SHA-256 算法<strong>两次</strong>散列 <em><code>transactionString</code></em> 的字节。</li>
<li>通过对 SHA-256 散列的两个连续舍入的输入字节进行十六进制编码来生成交易验证令牌，看似下面这样：<br />
<pre><code>transactionToken = 870a0d13da1f1670b5ba35f27604018aeb804d5e6ac5c48194b2358e6748e2a8</code></pre>
</li>
<li>检查您生成的<code><em>transactionToken</em></code> 是否与在回调查询字符串中作为以下对象发送的令牌相同：<code>%digest%</code> 或<code>%edigest%</code></li>
</ol>
<h3><a name="PreventingReplayAttacks"></a>阻止<a href="http://en.wikipedia.org/wiki/Replay_attack">重播攻击</a></h3>
<p>若要阻止单个回调对您的服务器多次重播，请存储经过验证的交易 ID，并拒绝具有重复交易 ID 的未来回调。由于交易 ID 包含时戳，您可以通过固定及时回调的截止时间来限制必须存储的交易 ID 的数量，并检查是否存在重复 ID，方法如下：</p>
<ol>
<li>从交易 ID 中提取时戳（以毫秒计），像这样：<br />
<pre><code>transactionMillis = <em>transactionId</em>.substringAfter(":")</code></pre>
</li>
<li>检查 <code>transactionMillis</code> 是否晚于您的截止时间，且在您的截止时间后未遇到该 <code><em>transactionId</em></code>。</li>
</ol>
<h3><a name="ServerToServerSampleCode"></a>示例代码</h3>
<p>这些二进制数字的示例代码将帮助您实现服务器到服务器回调的安全！这里是一些示例：Node.js、Java、Python 和 Ruby。请注意：</p>
<ul>
<li>此<code>transaction_id</code> 可以是<code>%txid%</code> 或<code>%etxid%</code> （推荐）。</li>
<li>对于<code>%etxid%</code>，验证哈希应为<code>%edigest%</code>.</li>
</ul>
<p><button id="show-node">Node.js</button> <button id="show-java">Java</button> <button id="show-python">Python</button> <button id="show-ruby">Ruby</button></p>
<div id="code-node" class="code-blocks">
<h4><span class="wysiwyg-color-blue"><strong>Node.js</strong></span></h4>
<pre><code>var crypto = require('crypto');

function isTransactionValid(secret, transaction_id, provided_hash) {
  return isTransactionRecent(transaction_id) &amp;&amp;
         isTransactionNew(transaction_id)    &amp;&amp;
         createSecurityDigest(secret, transaction_id) === provided_hash;
}

function getTransactionTimestamp(transaction_id) {
  return parseInt(transaction_id.split(":")[1], 10) || null;
}

function isTransactionRecent(transaction_id) {
  // Does the transaction have a reasonable format?
  var tx_timestamp = getTransactionTimestamp(transaction_id);
  if (tx_timestamp === null) { return false; }

  // Is the transaction within a reasonable time range?
  var now = new Date().getTime();
  var time_diff = now - tx_timestamp;
  var hour_in_future = -1000 * 60 * 60, three_days_ago = 1000 * 60 * 60 * 24 * 3;
  return (time_diff &lt; three_days_ago &amp;&amp; time_diff &gt; hour_in_future);
}

// Have we seen this transaction before?
// NOTE: To scale beyond just this one node process, you'll need to put this in some
// sort of centralized datastore. Any one that supports atomic insertions into a set
// should do. The Redis database, with its SADD command, would be a good place to start.
var known_transactions = {};
function isTransactionNew(transaction_id) {<br /><br />// For %etxid%, extract unique event id from etxid, which is the string before “:”, and use it to identify unique ad events
<br />  if (known_transactions[transaction_id]) { return false; }

  known_transactions[transaction_id] = true;
  return true;
}

function createSecurityDigest(secret, transaction_id) {
  var firsthash = crypto.createHash("sha256").update(secret + ":" + transaction_id).digest("binary");
  return crypto.createHash("sha256").update(firsthash,"binary").digest("hex");
}</code></pre>
</div>
<div id="code-java" class="code-blocks">
<h4><span class="wysiwyg-color-blue"><strong>Java</strong></span></h4>
<pre><code>import java.nio.charset.Charset;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.text.ParseException;

public class ServerCallbackSecurityExample {
  private static final long MAX_CALLBACK_AGE_MILLIS = 7 * 24 * 60 * 60 * 1000;  // 7 days

  /**
   * Checks that a transaction is recent enough, signed with the secretKey, and not a duplicate.
   * 
   * @param transactionId the transaction ID.
   * @param secretKey a shared secret.
   * @param verificationDigest the verification digest sent in the callback querystring.
   */
  public boolean isValidTransaction(String transactionId, String secretKey, String verificationDigest) throws NoSuchAlgorithmException {
    return isRecentTransaction(transactionId)
      &amp;&amp; isDigestValid(transactionId, secretKey, verificationDigest)
      &amp;&amp; isNewTransaction(transactionId);
  }

  protected boolean isRecentTransaction(String transactionId) {
    boolean isRecent = false;
    try {
      final long minCallbackAgeMillis = System.currentTimeMillis() - MAX_CALLBACK_AGE_MILLIS;
      final long transactionMillis = getTransactionMillis(transactionId);
      isRecent = (transactionMillis &gt; minCallbackAgeMillis);
    }
    catch (ParseException exception) {
      // invalid transaction ID format
    }
    return isRecent;
  }

  protected boolean isDigestValid(String transactionId, String secretKey, String verificationDigest) throws NoSuchAlgorithmException {
    return createSecurityDigest(transactionId, secretKey)
      .equals(verificationDigest);
  }

  protected boolean isNewTransaction(String transactionId) {
    // TODO if transactionId is new, store the transactionId with its associated transactionMillis<br />    // For %etxid%, extract unique event ID from etxid, which is the string before ":", and use it to identify unique ad events<br />
    return true;
  }

  protected long getTransactionMillis(String transactionId) throws ParseException {
    final int transactionMillisIndex = transactionId.lastIndexOf(":") + 1;
    try {
      if (transactionMillisIndex &gt; 0 &amp;&amp; transactionMillisIndex &lt; transactionId.length()) {
        return Long.parseLong(
          transactionId.substring(transactionMillisIndex));
      }
      else {
        throw new ParseException("No timestamp in transaction ID", transactionMillisIndex);
      }
    }
    catch (NumberFormatException exception) {
      throw new ParseException("Invalid transaction ID timestamp", transactionMillisIndex);
      // invalid timestamp
    }
  }

  protected String createSecurityDigest(String transactionId, String secretKey) throws NoSuchAlgorithmException {
    final String verificationString = secretKey + ":" + transactionId;
    final MessageDigest messageDigest = MessageDigest.getInstance("SHA-256");
    return toHexString(
      messageDigest.digest(
        messageDigest.digest(
          verificationString.getBytes(Charset.forName("US-ASCII")))));
  }

  protected String toHexString(byte[] bytes) {
    final StringBuffer hexStringBuffer = new StringBuffer();
    for (final byte byt : bytes) {
      hexStringBuffer.append(
        Integer.toString((byt &amp; 0xff) + 0x100, 16)
          .substring(1));
    }
    return hexStringBuffer.toString();
  }
}</code></pre>
</div>
<div id="code-python" class="code-blocks">
<h4><span class="wysiwyg-color-blue"><strong>Python</strong></span></h4>
<pre><code>import hashlib, time

def isTransactionValid(secret, transaction_id, input_hash):
  """Returns whether this transaction id / hash should be considered valid"""
  return isTransactionIDRecent(transaction_id) and \
         isTransactionIDNew(transaction_id)    and \
         createSecurityDigest(secret, transaction_id) == input_hash

def getTransactionTimestamp(transaction_id):
  """Will return the unix time (in milliseconds) of this transaction, or None if invalid"""
  parsed = transaction_id.split(":")
  try:
    return int(parsed[1]) if len(parsed) == 2 else None
  except ValueError as e:
    return None

def isTransactionIDRecent(transaction_id):
  """Is this transaction within a reasonable time range?"""
  tx_time = getTransactionTimestamp(transaction_id)

  # Handle bad transaction:
  if tx_time is None:
    return False

  # Handle bad transaction times:
  now = int(time.time() * 1000)
  three_days_ago = now - (1000 * 60 * 60 * 24 * 3)
  one_hour_from_now = now + (1000 * 60 * 60)
  return ( three_days_ago &lt; tx_time &lt; one_hour_from_now )

def isTransactionIDNew(transaction_id, known_transaction_ids=set()):
  """Is this a duplicate transaction?
     NOTE: We only use the Python set for simplicity. For better / more centralized solutions,
     you can use any datastore that supports atomic insertion into a set. For starters, try
     Redis with its "SADD" command."""<br /><br />  """For %etxid%, extract unique event ID from etxid, which is the string before ":", and use it to identify unique ad events"""<br />
  if transaction_id in known_transaction_ids:
    return False

  # Else, valid:
  known_transaction_ids.add(transaction_id)
  return True


def createSecurityDigest(secret, transaction_id):
  """Will return the string that the security hash should have been"""
  firsthash = hashlib.sha256()
  firsthash.update(secret + ":" + transaction_id)

  secondhash = hashlib.sha256()
  secondhash.update(firsthash.digest())

  return secondhash.hexdigest()
</code></pre>
</div>
<div id="code-ruby" class="code-blocks">
<h4><span class="wysiwyg-color-blue"><strong>Ruby</strong></span></h4>
<pre><code>require "openssl"
require "digest/sha2"
require "base64"
require "time"

# just some helper methods, ignore if using Rails
class Fixnum
  SECONDS_IN_DAY = 24 * 60 * 60
  HOURS_IN_DAY = 24 * 60

  def days
    self * SECONDS_IN_DAY
  end

  def hour
    self * 60 * 60
  end

  def ago
    (Time.now - self)
  end

  def from_now
    (Time.now + self)
  end
end

def transaction_valid?(secret, txid, input_hash)
  transaction_id_recent?(txid) &amp;&amp; transaction_id_new?(txid) &amp;&amp; create_security_digest(secret, txid) == input_hash
end

def transaction_timestamp(txid)
  arr = txid.split(":")
  return arr[1].to_i if arr.size == 2
end

def transaction_id_recent?(txid)
  tx_time = transaction_timestamp(txid)
  return false if tx_time.nil?

  now = Time.now.to_i
  three_days_ago = 3.days.ago
  one_hour_from_now = 1.hour.from_now
  three_days_ago.to_i &lt; tx_time &amp;&amp; tx_time &lt; one_hour_from_now.to_i
end
<br /># For %etxid%, extract unique event ID from etxid, which is the string before ":", and use it to identify unique ad events
def transaction_id_new?(txid, transactions = [])
  return false if transactions.include?(txid)
  transactions &lt;&lt; txid
  return true
end

def create_security_digest(secret, txid)
  verification_string = "#{secret}:#{txid}"
  first_digest = Digest::SHA2.new(256).update(verification_string)
  Digest::SHA2.new(256).hexdigest(first_digest.digest)
end
</code></pre>
</div>
              </div>     

            </div>

            <div class="article__attachments">
              
            </div>

          </article>
        </div>

        <div class="article-loader fa fa-spinner fa-spin fa-3x fa-fw" id="article-loader"></div>

        
          <a class="article-banner" href="https://vungle.com/signup" target="_blank">
            <span class="article-banner__title">
              <span>Powered by Creativity</span>
              <span>Driven by Performance</span>
            </span>
            <span class="article-banner__cta">Sign Up Here</span>
          </a>
        

        <div data-prevnext='{"showArticleTitle": true, "classNameBtn": ""}'></div>

        <section class="submit-ticket submit-ticket--article">
          <div class="submit-ticket-col submit-ticket-col--left">
            <h2 class="submit-ticket-title">Questions?</h2>
            <p>Need further assistance, feel free to reach out to us, we’re here to help!</p>
          </div>
          <div class="submit-ticket-col submit-ticket-col--right">
            <a class="btn btn--default" href="../requests/new.html">提交请求</a>
          </div>
        </section>

        <footer class="article-footer">
          
          <div class="article-vote">
            <span class="article-vote-question">这篇文章有帮助吗？</span>
            <div class="article-vote-controls">
              <a class="btn btn--default fa fa-thumbs-up article-vote-controls__item article-vote-controls__item--up" data-auth-action="signin" aria-selected="false" role="button" rel="nofollow" title="是" href="../signinc32c.html?return_to=https%3A%2F%2Fsupport.vungle.com%2Fhc%2Fzh-cn%2Farticles%2F204374244-%25E8%25AE%25BE%25E7%25BD%25AE%25E5%25A5%2596%25E5%258A%25B1%25E5%25B9%25BF%25E5%2591%258A"></a>
              <a class="btn btn--default fa fa-thumbs-down article-vote-controls__item article-vote-controls__item--down" data-auth-action="signin" aria-selected="false" role="button" rel="nofollow" title="否" href="../signinc32c.html?return_to=https%3A%2F%2Fsupport.vungle.com%2Fhc%2Fzh-cn%2Farticles%2F204374244-%25E8%25AE%25BE%25E7%25BD%25AE%25E5%25A5%2596%25E5%258A%25B1%25E5%25B9%25BF%25E5%2591%258A"></a>
            </div>
          </div>
          
        </footer>

      </div>
    </div>
    <div class="article-column article-column--right">
      <div data-toc='{"headers": "h2,h3,h4", "title": "Contents", "offsetTop": 80, "mobileBreakpoint": 1024}'></div>
    </div>
  </div>

</div>
  </main>

        <footer class="footer" id="footer">
        <div class="footer-inner">
          <div class="copyright">
            <div class="copyright__content">
              <span class="copyright__copy">&copy; 2020 Vungle. All rights reserved.</span>
            </div>
          </div>
          <nav class="footer-menu">
            <ul class="list-unstyled">
              <li><a href="https://vungle.com/about-us/">About</a></li>
              <li><a href="https://vungle.com/login/">Products</a></li>
              <li><a href="https://vungle.com/contact-us/">Contact us</a></li>
            </ul>
          </nav>
          <ul class="footer-socials list-unstyled">
            
              <li><a href="https://www.facebook.com/vungle/" target="_blank" class="fab fa-facebook"></a></li>
            
            
              <li><a href="https://twitter.com/vungle" target="_blank" class="fab fa-twitter"></a></li>
            
            
            
              <li><a href="https://www.linkedin.com/company/vungle" target="_blank" class="fab fa-linkedin"></a></li>
            
            
            
            
              <li><a href="https://www.instagram.com/vungle/" target="_blank" class="fab fa-instagram"></a></li>
            
          </ul>
        </div>
      </footer>
          
    </div>
    <!-- /.main__container -->

  </div>  
  <!-- /.main -->
  
</div>
<!-- /.layout -->



  <!-- / -->

  
  <script src="../../../../static.zdassets.com/hc/assets/zh-cn.b71cebf2cff635e19e20.js"></script>
  <script src="../../../../vungle.zendesk.com/auth/v2/host.js" data-brand-id="60720" data-return-to="https://support.vungle.com/hc/zh-cn/articles/204374244-%E8%AE%BE%E7%BD%AE%E5%A5%96%E5%8A%B1%E5%B9%BF%E5%91%8A" data-theme="hc" data-locale="zh-cn" data-auth-origin="60720,true,true"></script>

  <script type="text/javascript">
  /*

    Greetings sourcecode lurker!

    This is for internal Zendesk and legacy usage,
    we don't support or guarantee any of these values
    so please don't build stuff on top of them.

  */

  HelpCenter = {};
  HelpCenter.account = {"subdomain":"vungle","environment":"production","name":"Vungle"};
  HelpCenter.user = {"identifier":"da39a3ee5e6b4b0d3255bfef95601890afd80709","email":null,"name":null,"role":"anonymous","avatar_url":"https://assets.zendesk.com/hc/assets/default_avatar.png","is_admin":false,"organizations":[],"groups":[]};
  HelpCenter.internal = {"asset_url":"//static.zdassets.com/hc/assets/","web_widget_asset_composer_url":"https://static.zdassets.com/ekr/snippet.js","current_session":{"locale":"zh-cn","csrf_token":null,"shared_csrf_token":null},"settings":{},"usage_tracking":{"event":"article_viewed","data":"BAh7CDoLbG9jYWxlSSIKemgtY24GOgZFVDoPYXJ0aWNsZV9pZGkE5IAuDDoKX21ldGF7CzoPYWNjb3VudF9pZGkDPSYIOhNoZWxwX2NlbnRlcl9pZGkENsfsCzoNYnJhbmRfaWRpAjDtOgx1c2VyX2lkMDoTdXNlcl9yb2xlX25hbWVJIg5BTk9OWU1PVVMGOwZUOwBJIgp6aC1jbgY7BlQ=--53bbaabf112bc48332c89e0062ef0d27c97eb0dd","url":"https://support.vungle.com/hc/activity"},"current_record_id":"204374244","current_record_url":"/hc/zh-cn/articles/204374244-%E8%AE%BE%E7%BD%AE%E5%A5%96%E5%8A%B1%E5%B9%BF%E5%91%8A","current_record_title":"设置奖励广告","search_results_count":null,"current_text_direction":"ltr","current_brand":{"id":60720,"account_id":534077,"name":"Vungle","active":true,"deleted_at":null,"created_at":"2014-05-29T20:19:19Z","updated_at":"2021-05-13T16:25:53Z","route_id":429018,"signature_template":"{{agent.signature}}"},"current_brand_url":"https://vungle.zendesk.com","current_host_mapping":"support.vungle.com","current_path":"/hc/zh-cn/articles/204374244-%E8%AE%BE%E7%BD%AE%E5%A5%96%E5%8A%B1%E5%B9%BF%E5%91%8A","authentication_domain":"https://vungle.zendesk.com","show_autocomplete_breadcrumbs":true,"rollbar_config":{"enabled":true,"endpoint":"https://rollbar-us.zendesk.com/api/1/item/","accessToken":"731a5a953e9a4b7ab6cac9623f50c732","captureUncaught":true,"captureUnhandledRejections":true,"payload":{"environment":"production","client":{"javascript":{"source_map_enabled":true,"code_version":"8e508d702ea3bb44fb7e90308d7e394bc580895e","guess_uncaught_frames":true}}}},"user_info_changing_enabled":false,"has_user_profiles_enabled":false,"has_end_user_attachments":true,"user_aliases_enabled":false,"has_anonymous_kb_voting":false,"has_multi_language_help_center":true,"mobile_device":false,"mobile_site_enabled":false,"show_at_mentions":false,"embeddables_config":{"embeddables_web_widget":true,"embeddables_connect_ipms":false},"base_domain":"zendesk.com","answer_bot_subdomain":"static","manage_content_url":"https://support.vungle.com/hc/zh-cn","arrange_content_url":"https://support.vungle.com/hc/admin/arrange_contents?locale=zh-cn","general_settings_url":"https://support.vungle.com/hc/admin/general_settings?locale=zh-cn","user_segments_url":"https://vungle.zendesk.com/knowledge/user_segments?brand_id=60720","has_gather":true,"has_community_enabled":false,"has_community_badges":false,"has_user_segments":true,"has_answer_bot_web_form_enabled":false,"has_answer_bot_web_form_modal_v2":false,"has_edit_user_profile_v2":false,"billing_url":"/access/return_to?return_to=https://vungle.zendesk.com/admin/billing/subscription","is_account_owner":false,"theming_cookie_key":"hc-da39a3ee5e6b4b0d3255bfef95601890afd807091-preview","is_preview":false,"has_guide_user_segments_search":true,"has_alternate_templates":false,"arrange_articles_url":"https://vungle.zendesk.com/knowledge/arrange?brand_id=60720","article_verification_url":"https://vungle.zendesk.com/knowledge/verification?brand_id=60720","has_article_verification":false,"guide_language_settings_url":"https://support.vungle.com/hc/admin/language_settings?locale=zh-cn","docs_importer_url":"https://vungle.zendesk.com/knowledge/import_articles?brand_id=60720","community_badges_url":"https://vungle.zendesk.com/knowledge/community_badges?brand_id=60720","community_settings_url":"https://vungle.zendesk.com/knowledge/community_settings?brand_id=60720","gather_plan_state":"subscribed","search_settings_url":"https://vungle.zendesk.com/knowledge/search_settings?brand_id=60720","has_multibrand_search_in_plan":false,"theming_api_version":1,"has_pci_credit_card_custom_field":false,"current_brand_id":60720,"help_center_restricted":false,"current_brand_active":true,"is_assuming_someone_else":false,"flash_messages":[],"user_photo_editing_enabled":true,"has_end_user_apps":false,"has_docs_importer":true,"has_sunco_widget":false,"gather_user_image_upload_via_aus":false,"user_preferred_locale":"en-us"};
</script>

  <script src="../../../../static.zdassets.com/hc/assets/moment-f6f8513da6ab17eadada59a1a4edb536.js"></script>
  <script src="../../../../static.zdassets.com/hc/assets/hc_enduser-9fa4fabcc25ad7ce2141d33e2370693a.js"></script>
  
<script type="text/javascript">(function(){window['__CF$cv$params']={r:'6932dd69a8852584',m:'spws2TvZXKPJKF8upzG9SjfslKPuPwOsjdmI7T0xpew-1632390586-0-AfLsRPVrmKeY6F/1/fLVS5myO3vEV44k3BGajudKDY4jH09SY4Sa7vQC4YpuWTFGImcEZPBMitKvTSsdK8QCReNQwYw/UIsm+Cnx9OmRi2Qz7S661ChEvAqa1ygOdPmeof4pUAeF/L+l+eaZ3iGfMfI/tQt7u+DIs0jPyt4hD8tzDwO+PGmSwpguxDmt3bxAIVyMISkd5naj6jpsmq44+26CtGC2tIqPm1SoSXp3/54o',s:[0x70f04fa9ce,0xf81ef8482a],}})();</script></body>

<!-- Mirrored from support.vungle.com/hc/zh-cn/articles/204374244-设置奖励广告 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 23 Sep 2021 09:57:50 GMT -->
</html>